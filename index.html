<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Bachaa</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin:0;
  font-family: Georgia, serif;
  background:#ffe6eb;
}

.page {
  display:none;
  min-height:100vh;
  padding:20px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

.active { display:flex; }

p {
  font-size:18px;
  line-height:1.6;
  max-width:600px;
}

h2 {
  font-size:26px;
}

button {
  padding:12px 24px;
  font-size:16px;
  border:none;
  border-radius:20px;
  background:#e6004c;
  color:white;
  margin:10px;
  cursor:pointer;
}

#noBtn {
  background:#aaa;
  font-size:12px;
}

img, video {
  width:90%;
  max-width:320px;
  border-radius:12px;
  margin:15px 0;
}

.selected {
  background:gold !important;
  color:black;
}

.timer {
  font-size:18px;
  margin:10px;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
<p id="introText"></p>
<button onclick="goPage(2)">Begin</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
<h2>Will you be my Valentine? ‚ù§Ô∏è</h2>
<p id="tease"></p>
<button id="yesBtn" onclick="goPage(3)">YES</button>
<button id="noBtn" onclick="growYes()">NO</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
<img src="pic1.jpg">
<p id="letterText"></p>
<button onclick="goPage(4)">Next</button>
</div>

<!-- PAGE 4 -->
<div class="page" id="page4">
<h2>Our Story üíï</h2>
<video src="story.mp4" controls></video>
<button onclick="goPage(5)">Next</button>
</div>

<!-- PAGE 5 -->
<div class="page" id="page5">
<h2>Listen to Me üéß</h2>
<audio src="myvoice.mp3" controls></audio>

<p>Now record something for me üíñ</p>
<div class="timer" id="recordTimer">Not recording</div>

<button onclick="startRecording()">üé§ Start Recording</button>
<button onclick="stopRecording()">‚èπ Stop</button>
<a id="downloadLink"></a>

<button onclick="goPage(6)">Next</button>
</div>

<!-- PAGE 6 -->
<div class="page" id="page6">
<h2>Choose Our Date üåπ</h2>
<button onclick="chooseDate(this,'Temple Visit')">Temple Visit</button>
<button onclick="chooseDate(this,'Candlelight Dinner')">Candlelight Dinner</button>
<button onclick="chooseDate(this,'Road Trip')">Road Trip</button>
<button onclick="chooseDate(this,'Movie Date')">Movie Date</button>

<p id="chosenDateText"></p>
<button onclick="goPage(7)">Final</button>
</div>

<!-- PAGE 7 -->
<div class="page" id="page7">
<h2>For You, Bachaa ‚ù§Ô∏è</h2>
<p id="finalText"></p>
</div>

<script>
/* INTRO */
let introMsg = "This is made only for you...\n\nPlease don‚Äôt rush.\nSit comfortably.\nWear earphones.\n\nTap Begin when you are ready.";
typeWriter(introMsg,"introText");

/* YES NO */
let yesSize = 16;
let teaseTexts = ["Are you sure? üòè","Think again...","My heart is waiting...","You can‚Äôt escape love üíñ"];
let teaseIndex = 0;

function growYes(){
  yesSize += 6;
  document.getElementById("yesBtn").style.fontSize = yesSize+"px";
  document.getElementById("tease").innerText = teaseTexts[teaseIndex];
  teaseIndex = (teaseIndex+1)%teaseTexts.length;
}

/* LOVE LETTER */
let letter = "My Bachaa,\n\nI will write this letter for you later.\nYou are very special to me.\n\nThis is only for you.\n\nForever yours.";

/* PAGE CONTROL */
function goPage(n){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("page"+n).classList.add("active");

  if(n===3){
    typeWriter(letter,"letterText");
  }

  if(n===7){
    finalText.innerHTML = 
      "Our next date will be: <b>"+selectedDate+"</b><br><br>" +
      "This was made only for you.<br>" +
      "Thank you for being in my life ‚ù§Ô∏è";
  }
}

/* TYPEWRITER */
function typeWriter(text,id){
  let i=0;
  let el=document.getElementById(id);
  el.innerText="";
  let timer=setInterval(()=>{
    if(i<text.length){
      el.innerText += text.charAt(i);
      i++;
    } else clearInterval(timer);
  },40);
}

/* VOICE RECORDING WITH TIMER */
let mediaRecorder;
let audioChunks=[];
let seconds=0;
let timerInterval;

function startRecording(){
  navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    mediaRecorder = new MediaRecorder(stream);
    mediaRecorder.start();
    audioChunks=[];
    seconds=0;
    recordTimer.innerText="Recording: 0 sec";

    timerInterval = setInterval(()=>{
      seconds++;
      recordTimer.innerText = "Recording: " + seconds + " sec";
    },1000);

    mediaRecorder.ondataavailable = e => audioChunks.push(e.data);
  });
}

function stopRecording(){
  mediaRecorder.stop();
  clearInterval(timerInterval);

  mediaRecorder.onstop = ()=>{
    const blob = new Blob(audioChunks,{type:'audio/mp3'});
    const url = URL.createObjectURL(blob);
    downloadLink.href = url;
    downloadLink.download = "Bachaa_voice_message.mp3";
    downloadLink.innerText = "‚¨á Download your recording";
  }
}

/* DATE CHOICE */
let selectedDate = "";

function chooseDate(btn,choice){
  document.querySelectorAll("#page6 button").forEach(b=>b.classList.remove("selected"));
  btn.classList.add("selected");
  selectedDate = choice;
  chosenDateText.innerText = "We will go for: " + choice;
}
</script>

</body>
</html>
