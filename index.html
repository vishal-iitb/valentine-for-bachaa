<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Bachaa</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#ffb6c1;
  overflow:hidden;
}

/* Pages */
.page{
  display:none;
  width:100vw;
  height:100vh;
  padding:20px;
  box-sizing:border-box;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}

.active{display:flex;}

p{
  font-size:18px;
  line-height:2;
  max-width:600px;
  white-space:pre-line;
}

h2{
  margin-bottom:15px;
}

button{
  padding:12px 25px;
  font-size:16px;
  border:none;
  border-radius:20px;
  margin:10px;
  cursor:pointer;
  background:red;
  color:white;
}

#noBtn{
  background:gray;
  font-size:12px;
}

img,video{
  width:90%;
  max-width:300px;
  border-radius:15px;
  margin-bottom:15px;
}

.selected{
  background:gold !important;
  color:black;
}

/* Floating butterflies & roses */
.floating{
  position:fixed;
  font-size:22px;
  animation: floatUp linear infinite;
  opacity:0.8;
  pointer-events:none; /* VERY IMPORTANT FIX */
}

@keyframes floatUp{
  from{transform:translateY(100vh);}
  to{transform:translateY(-10vh);}
}

.timer{
  font-size:18px;
  margin:10px;
}
</style>
</head>

<body>

<!-- PAGE 1 -->
<div class="page active" id="page1">
<p id="introText"></p>
<button onclick="goPage(2)">Begin</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
<h2>Will you be my Valentine? ‚ù§Ô∏è</h2>
<p id="tease"></p>
<button id="yesBtn" onclick="goPage(3)">YES</button>
<button id="noBtn" onclick="growYes()">NO</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
<img src="pic1.jpg">
<p id="letterText"></p>
<button onclick="goPage(4)">Next</button>
</div>

<!-- PAGE 4 -->
<div class="page" id="page4">
<h2>Our Story üíï</h2>
<video src="story.mp4" controls></video>
<button onclick="goPage(5)">Next</button>
</div>

<!-- PAGE 5 -->
<div class="page" id="page5">
<h2>My Voice For You üéß</h2>
<audio src="myvoice.mp3" controls></audio>

<p>Now record something for me üíñ</p>
<div class="timer" id="recordTimer">Not recording</div>

<button onclick="startRecording()">üé§ Start Recording</button>
<button onclick="stopRecording()">‚èπ Stop</button>
<a id="downloadLink"></a>

<button onclick="goPage(6)">Next</button>
</div>

<!-- PAGE 6 -->
<div class="page" id="page6">
<h2>Choose Our Date üåπ</h2>
<button onclick="chooseDate(this,'Temple Visit')">Temple Visit</button>
<button onclick="chooseDate(this,'Candlelight Dinner')">Candlelight Dinner</button>
<button onclick="chooseDate(this,'Road Trip')">Road Trip</button>
<button onclick="chooseDate(this,'Movie Date')">Movie Date</button>

<p id="chosenDateText"></p>
<button onclick="goPage(7)">Final</button>
</div>

<!-- PAGE 7 -->
<div class="page" id="page7">
<h2>For You Bachaa ‚ù§Ô∏è</h2>
<p id="finalText"></p>
</div>

<script>
/* INTRO TEXT */
const introMsg =
"Thissss is made only for you.\n\n" +
"Please don‚Äôt rush.\n\n" +
"Sit comfortably.\n\n" +
"Wear earphones.\n\n" +
"Tap Begin when you are ready.";

typeWriter(introMsg,"introText");

/* LOVE LETTER */
const letter =
"My Bachaa,\n\n" +
"I will write this letter for you later.\n\n" +
"You are very special to me.\n\n" +
"This is made only for you.\n\n" +
"Forever yours.";

/* TYPEWRITER */
function typeWriter(text,id){
  let i=0;
  let el=document.getElementById(id);
  el.innerText="";
  let timer=setInterval(()=>{
    if(i<text.length){
      el.innerText+=text.charAt(i);
      i++;
    } else clearInterval(timer);
  },150);
}

/* PAGE CONTROL */
function goPage(n){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("page"+n).classList.add("active");

  if(n===3){
    typeWriter(letter,"letterText");
  }

  if(n===7){
    finalText.innerHTML=
      "Our next date will be: <b>"+selectedDate+"</b>\n\n"+
      "This was made only for you.\n\n"+
      "Thank you for being in my life ‚ù§Ô∏è";
  }
}

/* YES NO LOGIC */
let yesSize=16;
let teaseTexts=["Are you sure?","Think again...","My heart is waiting...","You can‚Äôt escape love üíñ"];
let teaseIndex=0;

function growYes(){
  yesSize+=6;
  yesBtn.style.fontSize=yesSize+"px";
  tease.innerText=teaseTexts[teaseIndex];
  teaseIndex=(teaseIndex+1)%teaseTexts.length;
}

/* VOICE RECORDING WITH TIMER */
let mediaRecorder;
let audioChunks=[];
let seconds=0;
let timerInterval;

function startRecording(){
  navigator.mediaDevices.getUserMedia({audio:true}).then(stream=>{
    mediaRecorder=new MediaRecorder(stream);
    mediaRecorder.start();
    audioChunks=[];
    seconds=0;
    recordTimer.innerText="Recording: 0 sec";

    timerInterval=setInterval(()=>{
      seconds++;
      recordTimer.innerText="Recording: "+seconds+" sec";
    },1000);

    mediaRecorder.ondataavailable=e=>audioChunks.push(e.data);
  });
}

function stopRecording(){
  mediaRecorder.stop();
  clearInterval(timerInterval);

  mediaRecorder.onstop=()=>{
    const blob=new Blob(audioChunks,{type:'audio/mp3'});
    const url=URL.createObjectURL(blob);
    downloadLink.href=url;
    downloadLink.download="Bachaa_voice_message.mp3";
    downloadLink.innerText="‚¨á Download your recording";
  };
}

/* DATE */
let selectedDate="";

function chooseDate(btn,choice){
  document.querySelectorAll("#page6 button").forEach(b=>b.classList.remove("selected"));
  btn.classList.add("selected");
  selectedDate=choice;
  chosenDateText.innerText="We will go for: "+choice;
}

/* BUTTERFLIES & ROSES */
function spawn(symbol){
  const e=document.createElement("div");
  e.className="floating";
  e.innerText=symbol;
  e.style.left=Math.random()*100+"vw";
  e.style.animationDuration=(6+Math.random()*4)+"s";
  document.body.appendChild(e);
  setTimeout(()=>e.remove(),10000);
}

setInterval(()=>spawn("ü¶ã"),2000);
setInterval(()=>spawn("üåπ"),3000);
</script>

</body>
</html>
