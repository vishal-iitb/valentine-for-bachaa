<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Time Capsule for Bachaa</title>

<style>
body {
  margin:0;
  font-family: Georgia, serif;
  background:#ffe6eb;
  text-align:center;
  overflow:hidden;
}

.page {
  display:none;
  padding:60px 20px;
  animation: fade 1s ease;
}

.active { display:block; }

@keyframes fade {
  from {opacity:0;}
  to {opacity:1;}
}

h1 {
  font-size:34px;
}

p {
  font-size:20px;
  line-height:1.6;
  max-width:600px;
  margin:auto;
}

button {
  padding:14px 28px;
  font-size:18px;
  border:none;
  border-radius:25px;
  margin:15px;
  cursor:pointer;
  background:#e6004c;
  color:white;
  transition:0.3s;
}

button:hover {
  background:#ff3366;
}

.clicked {
  background:#ffd700 !important;
  color:black;
}

video, audio {
  width:90%;
  max-width:320px;
  margin:15px;
}

input {
  padding:12px;
  font-size:18px;
  border-radius:10px;
  border:1px solid #ccc;
}
</style>
</head>

<body>

<audio id="music" autoplay loop src="song1.mp3"></audio>

<!-- PAGE 1 -->
<div class="page active" id="page1">
<h1>Time Capsule üíñ</h1>
<p>
This is a time capsule from Bunty to Bachaa.<br><br>
Open it slowly‚Ä¶ and keep this moment forever.
</p>
<button onclick="nextPage(2,this)">Open Capsule</button>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
<h1>Our Story</h1>
<p>This is how our love became a memory.</p>
<video src="story.mp4" controls></video>
<button onclick="nextPage(3,this)">Next</button>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
<h1>My Voice</h1>
<p>Listen to this when you miss me.</p>
<audio src="myvoice.mp3" controls></audio>
<button onclick="nextPage(4,this)">Next</button>
</div>

<!-- PAGE 4 -->
<div class="page" id="page4">
<h1>Your Voice</h1>
<p>Record something for me. I will keep it forever.</p>
<button onclick="startRecording()">üé§ Start Recording</button>
<button onclick="stopRecording()">‚èπ Stop</button>
<a id="downloadLink"></a>
<button onclick="nextPage(5,this)">Next</button>
</div>

<!-- PAGE 5 -->
<div class="page" id="page5">
<h1>Choose Our Next Memory</h1>

<button onclick="chooseDate(this,'Temple Visit')">Temple Visit</button>
<button onclick="chooseDate(this,'Movie Date')">Movie Date</button>
<button onclick="chooseDate(this,'Bike Road Date')">Bike Road Date</button>
<button onclick="chooseDate(this,'Candlelight Dinner')">Candlelight Dinner</button>

<p id="chosenDateText"></p>
<button onclick="nextPage(6,this)">Lock Capsule</button>
</div>

<!-- PAGE 6 -->
<div class="page" id="page6">
<h1>Lock the Capsule üîê</h1>
<p>Only Bachaa can open it.</p>
<input type="password" id="passwordInput" placeholder="Enter secret word">
<br><br>
<button onclick="checkPassword()">Unlock</button>
<p id="passwordMessage"></p>
</div>

<!-- PAGE 7 -->
<div class="page" id="page7">
<h1>Capsule Sealed ‚ù§Ô∏è</h1>
<p id="finalText"></p>
</div>

<script>
let selectedDate = "";
const correctPassword = "Bachaa";

function nextPage(n,btn){
  if(btn) btn.classList.add("clicked");
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById("page"+n).classList.add("active");
}

function chooseDate(btn,choice){
  document.querySelectorAll("#page5 button").forEach(b=>b.classList.remove("clicked"));
  btn.classList.add("clicked");
  selectedDate = choice;
  localStorage.setItem("chosenDate", choice);
  chosenDateText.innerText = "We will go for: " + choice + " ‚ù§Ô∏è";
}

function checkPassword(){
  const input = document.getElementById("passwordInput").value;
  if(input === correctPassword){
    nextPage(7);
    showFinalMessage();
  } else {
    passwordMessage.innerText = "Wrong word‚Ä¶ try again my love ‚ù§Ô∏è";
  }
}

function showFinalMessage(){
  const date = localStorage.getItem("chosenDate");
  finalText.innerHTML =
    "This capsule holds our love.<br><br>" +
    "Our next memory will be: <b>" + date + "</b><br><br>" +
    "Open this again after one year and remember today.<br><br>" +
    "Forever yours,<br>Bunty ‚ù§Ô∏è";
}

/* Voice recording */
let mediaRecorder;
let audioChunks=[];

function startRecording(){
  navigator.mediaDevices.getUserMedia({ audio:true })
  .then(stream=>{
    mediaRecorder=new MediaRecorder(stream);
    mediaRecorder.start();
    audioChunks=[];
    mediaRecorder.ondataavailable=e=>audioChunks.push(e.data);
  });
}

function stopRecording(){
  mediaRecorder.stop();
  mediaRecorder.onstop=()=>{
    const blob=new Blob(audioChunks,{type:'audio/mp3'});
    const url=URL.createObjectURL(blob);
    const link=document.getElementById("downloadLink");
    link.href=url;
    link.download="Bachaa_voice_message.mp3";
    link.innerText="‚¨á Download & Send to Bunty";
  };
}
</script>

</body>
</html>
