<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Bachaa ğŸ’–</title>

<style>
body {
  margin:0;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  background: #ffecf2;
  text-align:center;
  overflow-x:hidden;
  color: #333;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.page {
  display:none;
  padding:15px; /* Slightly reduced padding */
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: space-evenly; /* Distribute space evenly */
  align-items: center;
  box-sizing: border-box;
  width: 100%; /* Ensure page takes full width */
  overflow: hidden; /* Prevent scrolling within the page */
}

.active {
  display:flex;
}

h2, h3, p {
  margin-bottom: 10px; /* Slightly reduced margin */
  line-height: 1.5; /* Adjusted line height */
  padding: 0 10px; /* Horizontal padding for text */
}

button {
  padding:12px 20px; /* Slightly smaller buttons to fit */
  font-size:18px; /* Slightly smaller font to fit */
  border:none;
  border-radius:30px;
  margin:8px; /* Slightly reduced margin */
  cursor:pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  flex-shrink: 0; /* Prevent buttons from shrinking */
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

#beginBtn {
  background: #ff69b4;
  color:white;
}

#yesBtn {
  background: #ff4d88;
  color:white;
}

#noBtn {
  background:#cccccc;
  color:#666;
  font-size:11px; /* Even smaller font size for no */
}

img, video {
  width:90%;
  max-width:320px; /* Adjusted max-width for better fit */
  border-radius:20px;
  margin:10px 0; /* Adjusted margin */
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  height: auto; /* Ensure aspect ratio is maintained */
  max-height: 30vh; /* Limit height to prevent overflow on very long content */
  object-fit: contain; /* Ensure image fits within its bounds without cropping */
}

.heart {
  position:fixed;
  color:red;
  font-size:25px;
  animation: float 4s linear infinite;
  z-index: -1;
}

@keyframes float {
  0% {bottom:0; opacity:1; transform: translateX(0);}
  100% {bottom:100%; opacity:0; transform: translateX(calc((Math.random() - 0.5) * 50vw));}
}

#introText, #valentineQuestion, #loveLetterContent {
  white-space: pre-wrap;
  text-align: center;
  margin-bottom: 15px;
  font-size: 1.1em; /* Slightly smaller text for fitting */
}

#valentineQuestion {
  font-size: 1.4em; /* Adjusted font size */
  font-weight: bold;
  color: #e91e63;
}

#recordTimer {
  font-size: 1.3em; /* Adjusted font size */
  color: #ff4d88;
  margin-top: 10px;
  font-weight: bold;
}

.promise-section {
  background: rgba(255, 255, 255, 0.7);
  border-radius: 15px;
  padding: 10px; /* Reduced padding */
  margin-bottom: 10px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  width: 90%;
  max-width: 380px; /* Adjusted max-width */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* Ensure audio/video controls are visible */
audio, video {
  width: 90%;
  max-width: 320px;
  margin: 10px 0;
  flex-shrink: 0;
}
</style>
</head>

<body>

<audio id="music" autoplay loop></audio>

<!-- PAGE 0: Intro Page -->
<div class="page active" id="page0">
    <img src="your_special_pic_for_intro.jpg" alt="Special picture for Bachaa">
    <p id="introText"></p>
    <button id="beginBtn" onclick="nextPage(1)" style="display:none;">Tap to Begin âœ¨</button>
</div>

<!-- PAGE 1: Will you be my Valentine? -->
<div class="page" id="page1">
    <img src="valentine_question_pic.jpg" alt="Valentine question picture">
    <p id="valentineQuestion"></p>
    <p id="tease"></p>
    <button id="yesBtn" onclick="nextPage(2)">YES â¤ï¸</button>
    <button id="noBtn" onclick="growYes()">NO ğŸ˜’</button>
</div>

<!-- PAGE 2: Gift 1 - My Love Letter -->
<div class="page" id="page2">
    <h2>Gift 1: My Love Letter ğŸ’Œ</h2>
    <img src="love_letter_pic.jpg" alt="Love letter illustration">
    <p id="loveLetterContent"></p>
    <button onclick="nextPage(3)">Open Next Gift ğŸ</button>
</div>

<!-- PAGE 3: Gift 2 - Our Memories (Pictures & Story Video) -->
<div class="page" id="page3">
    <h2>Gift 2: Our Memories ğŸ¥°</h2>
    <img src="pic2.jpg" alt="Memory picture 1">
    <img src="pic3.jpg" alt="Memory picture 2">
    <video src="story.mp4" controls autoplay muted loop></video>
    <button onclick="nextPage(4)">Next Surprise ğŸ’</button>
</div>

<!-- PAGE 4: Gift 3 - My Promises -->
<div class="page" id="page4">
    <h2>Gift 3: My Promises ğŸ’</h2>
    <div id="promiseBox"></div>
    <button onclick="showPromise()">Next Promise ğŸ¤</button>
</div>

<!-- PAGE 5: My Voice Note & Your Recording -->
<div class="page" id="page5">
    <h2>My Heart's Whisper & Your Reply â¤ï¸</h2>
    <p>Listen to my special message for you whenever you feel low:</p>
    <audio controls src="my_voice_note.mp3"></audio>

    <p style="margin-top:15px;">Now, it's your turn Bachaa! Record something lovely for me:</p>
    <button id="startRecordBtn">Start Recording ğŸ¤</button>
    <button id="stopRecordBtn" style="display:none;">Stop Recording â¹ï¸</button>
    <p id="recordTimer">00:00</p>
    <button id="downloadRecordBtn" style="display:none;">Download Recording ğŸ’¾</button>
    <audio id="recordedAudio" controls style="display:none;"></audio>
    <button onclick="nextPage(6)">On to Our Date! âœ¨</button>
</div>

<!-- PAGE 6: Gift 4 - Choose Our Date -->
<div class="page" id="page6">
    <h2>Gift 4: Choose Our Date ğŸ˜˜</h2>
    <p>My Bachaa, pick one special thing we can do together very soon!</p>
    <button onclick="finalChoice('Temple Visit Together')">Temple Visit Together ğŸ›•</button>
    <button onclick="finalChoice('Candlelight Dinner')">Candlelight Dinner ğŸ•¯ï¸</button>
    <button onclick="finalChoice('Bike Road Trip')">Bike Road Trip ğŸï¸</button>
    <button onclick="finalChoice('Movie Date')">Movie Date ğŸ¬</button>
    <p id="choiceText"></p>
    <button onclick="nextPage(7)">Final Message ğŸ’–</button>
</div>

<!-- PAGE 7: Final Emotional Message -->
<div class="page" id="page7">
    <h2>My Forever Bachaa â¤ï¸</h2>
    <img src="final_message_pic.jpg" alt="Emotional final picture">
    <p>
    My dearest Bachaa,<br><br>
    Every moment with you is a treasure, a dream come true. You've painted my world with colors I never knew existed.<br>
    My love for you grows with each passing second, deeper than any ocean, brighter than any star.<br>
    Thank you for being you, for being my everything. I promise to cherish, protect, and love you fiercely, always.<br><br>
    You are my soulmate, my best friend, my forever.<br>
    I love you endlessly, to the moon and back and beyond ğŸ’•<br><br>
    Forever and always yours,<br>
    Your Bunty â¤ï¸
    </p>
</div>


<script>
let yesSize = 18;
let teaseTexts = [
  "Are you sure Bachaa? ğŸ¥º My heart is sinking a little!",
  "Aww, don't break my heart! ğŸ’” Think again my love ğŸ’•",
  "Come on, you know you want to say YES! â¤ï¸ My heart is waiting...",
  "Hehe, you can't escape love, my Bachaa! ğŸ˜˜ My 'YES' button is getting lonely!"
];
let teaseIndex = 0;

let promises = [
"I promise to always respect you and your feelings, making sure your voice is heard and valued above all â¤ï¸",
"I promise to stand by you in every happy and difficult moment, being your unwavering support and comfort ğŸ’–",
"I promise to make you smile even when life gets hard, with silly jokes, warm hugs, and endless love ğŸ˜Š",
"I promise to always choose you and our love, making our bond the priority in every decision and every day ğŸ’‘",
"I promise to love you more every single day, discovering new reasons to adore you and cherishing our journey together ğŸ’"
];
let promiseIndex = 0;

const music = document.getElementById("music");
let currentPage = 0;

// Slow typing function
function typeWriter(text, elementId, speed, callback) {
  let i = 0;
  const element = document.getElementById(elementId);
  element.innerHTML = '';
  function typing() {
    if (i < text.length) {
      element.innerHTML += text.charAt(i);
      i++;
      setTimeout(typing, speed);
    } else if (callback) {
      callback();
    }
  }
  typing();
}

// Initial intro text and Valentine's question
const introMessage = "This is made for you, only for you, my dearest Bachaa ğŸ’–. Please don't rush, sit comfortably, grab your earphones, and let's embark on this little journey of love together. âœ¨";
const valentineQ = "Will you be my Valentine, my beautiful Bachaa?";
const loveLetterText = `My Dearest Bachaa ğŸ’–,

From the moment you came into my life, everything started feeling more beautiful, more vibrant, more meaningful. You truly are the sunshine that brightens my darkest days.

Your smile is my favorite sight, a melody that brings immense joy to my soul. And your voice, oh your voice, it's my favorite sound, a sweet whisper that calms my heart.

You are my peace, my happiness, my biggest blessing, a dream I never knew I had but now can't live without. Every shared laugh, every quiet moment, every glance... they all weave into the beautiful tapestry of 'us'.

I want every tomorrow with you, exploring the world, overcoming challenges, and simply growing old together, hand in hand, heart to heart.

I love you more than words can ever explain, more than songs can sing, more than poems can capture. You are my everything.

Forever yours,
Your Bunty â¤ï¸`;


// Call typewriter for intro message on page load
document.addEventListener("DOMContentLoaded", () => {
  music.src = "song1.mp3";
  typeWriter(introMessage, "introText", 50, () => {
    document.getElementById("beginBtn").style.display = "block";
  });
});


function growYes() {
  yesSize += 10;
  document.getElementById("yesBtn").style.fontSize = yesSize + "px";
  document.getElementById("tease").innerText = teaseTexts[teaseIndex];
  teaseIndex = (teaseIndex + 1) % teaseTexts.length;
}

function nextPage(n) {
  document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
  document.getElementById("page"+n).classList.add("active");
  currentPage = n;

  // Reset and play music based on page
  if (n === 1) {
    music.src = "song1.mp3";
    music.play();
    typeWriter(valentineQ, "valentineQuestion", 70);
  } else if (n === 2) {
    music.src = "song2.mp3";
    music.play();
    typeWriter(loveLetterText, "loveLetterContent", 30);
  } else if (n === 3) {
    music.src = "song3.mp3";
    music.play();
  } else if (n >= 4) {
    music.src = "song4.mp3";
    music.play();
  }
}

function showPromise() {
  const promiseBox = document.getElementById("promiseBox");
  promiseBox.innerHTML = '';
  if(promiseIndex < promises.length) {
    const promiseDiv = document.createElement('div');
    promiseDiv.className = 'promise-section';
    promiseDiv.innerHTML =
      "<p>"+promises[promiseIndex]+"</p>" +
      "<button style='background:#90ee90; color:white; margin-top:10px; font-size:16px; padding:10px 15px;'>I accept this promise â€“ Bachaa ğŸ’–</button><br>" +
      "<button style='background:#add8e6; color:white; font-size:16px; padding:10px 15px;'>I promise too â€“ Bunty ğŸ¤</button>";
    promiseBox.appendChild(promiseDiv);
    promiseIndex++;
  } else {
    promiseBox.innerHTML = "<p>All promises made! Click below to continue.</p>";
    document.querySelector("#page4 button").innerText = "On to the next surprise! ğŸ’";
    document.querySelector("#page4 button").onclick = () => nextPage(5);
  }
}

function finalChoice(choice) {
  document.getElementById("choiceText").innerText =
    "Yay! We will go for: " + choice + " â¤ï¸ Looking forward to it!";
}

function createHeart() {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "â¤ï¸";
  heart.style.left = Math.random()*100 + "vw";
  heart.style.animationDuration = (Math.random()*2 + 3) + "s";
  heart.style.fontSize = (Math.random()*15 + 20) + "px";
  document.body.appendChild(heart);
  setTimeout(()=>heart.remove(), parseFloat(heart.style.animationDuration) * 1000);
}
setInterval(createHeart,500);


// Voice Recording Functionality
let mediaRecorder;
let audioChunks = [];
let audioBlob;
let recordInterval;
let startTime;

const startRecordBtn = document.getElementById('startRecordBtn');
const stopRecordBtn = document.getElementById('stopRecordBtn');
const downloadRecordBtn = document.getElementById('downloadRecordBtn');
const recordTimer = document.getElementById('recordTimer');
const recordedAudio = document.getElementById('recordedAudio');

startRecordBtn.addEventListener('click', async () => {
  try {
    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
    mediaRecorder = new MediaRecorder(stream);
    audioChunks = [];

    mediaRecorder.ondataavailable = event => {
      audioChunks.push(event.data);
    };

    mediaRecorder.onstop = () => {
      audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
      const audioUrl = URL.createObjectURL(audioBlob);
      recordedAudio.src = audioUrl;
      recordedAudio.style.display = 'block';
      downloadRecordBtn.style.display = 'block';
      clearInterval(recordInterval);
      recordTimer.innerText = '00:00';
    };

    mediaRecorder.start();
    startRecordBtn.style.display = 'none';
    stopRecordBtn.style.display = 'inline-block';
    recordedAudio.style.display = 'none';
    downloadRecordBtn.style.display = 'none';

    startTime = Date.now();
    recordInterval = setInterval(() => {
      const elapsedTime = Date.now() - startTime;
      const seconds = Math.floor((elapsedTime / 1000) % 60);
      const minutes = Math.floor((elapsedTime / (1000 * 60)) % 60);
      recordTimer.innerText = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }, 1000);

  } catch (err) {
    console.error('Error accessing microphone:', err);
    alert('Could not access microphone. Please ensure permissions are granted.');
  }
});

stopRecordBtn.addEventListener('click', () => {
  if (mediaRecorder && mediaRecorder.state === 'recording') {
    mediaRecorder.stop();
    mediaRecorder.stream.getTracks().forEach(track => track.stop());
    startRecordBtn.style.display = 'inline-block';
    stopRecordBtn.style.display = 'none';
  }
});

downloadRecordBtn.addEventListener('click', () => {
  if (audioBlob) {
    const a = document.createElement('a');
    a.href = recordedAudio.src;
    a.download = 'Bachaa_message_for_Bunty.webm';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }
});

</script>

</body>
</html>
